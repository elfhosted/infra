apiVersion: v1
kind: ConfigMap
metadata:
  name: zilean-config
  namespace: zilean
data:
  settings.json: |
    {
      "Zilean": {
        "FirstRun": false,
        "ApiKey": "overridden-in-env",
        "Dmm": {
          "EnableScraping": true,
          "EnableEndpoint": true,
          "ScrapeSchedule": "0 * * * *",
          "MinimumReDownloadIntervalMinutes": 30,
          "MaxFilteredResults": 200,
          "MinimumScoreMatch": 0.9,
          "ImportBatched": false
        },
        "Database": {
          "ConnectionString": "overridden-in-env"
        },        
        "Torznab": {
          "EnableEndpoint": true
        },
        "Torrents": {
          "EnableEndpoint": true,
          "EnableCacheCheckEndpoint": true
        },
        "Imdb": {
          "EnableImportMatching": true,
          "EnableEndpoint": true,
          "MinimumScoreMatch": 0.85,
          "UseLucene": true
        },
        "Ingestion": {
          "ZurgInstances": [
            {
              "Url": "http://zurg:9999",
              "EndpointType": 1
            }
          ],
          "ZileanInstances": [
            {
              "Url": "http://scrape-cc:80",
              "EndpointType": 0
            },
            {
              "Url": "http://scrape-com:80",
              "EndpointType": 0
            }                                
          ],
          "GenericInstances": [
            {
              "Url": "http://elfhosted-internal.stremthru:80",
              "EndpointType": 2,
              "Authorization": "elfies:arethegreatest",
              "EndpointSuffix": "/__debug__/torrents?no_missing_size=1"              
            }
          ],
          "EnableScraping": true,
          "Kubernetes": {
            "EnableServiceDiscovery": true,
            "KubernetesSelectors": [
              {
                "UrlTemplate": "http://zurg.{0}:9999",
                "LabelSelector": "zilean.elfhosted.com/scrape=true",
                "EndpointType": 1
              }
            ],
            "KubeConfigFile": "/$HOME/.kube/config",
            "AuthenticationType": 1
          },
          "BatchSize": 500,
          "MaxChannelSize": 5000,
          "ScrapeSchedule": "0 * * * *",
          "ZurgEndpointSuffix": "/debug/torrents",
          "ZileanEndpointSuffix": "/torrents/all"
        }
      }
    }