apiVersion: v1
kind: ConfigMap
metadata:
  name: dex-config
  namespace: demo-booklore
data:
  config.yaml: |
    issuer: http://dex:5556/dex

    storage:
      type: memory

    web:
      http: 0.0.0.0:5556

    staticClients:
      - id: demo-client
        redirectURIs:
          - http://demo-booklore.${dns_domain}/oauth2/callback
        name: "Demo App"
        secret: demo-secret

    connectors:
      - type: password
        id: static
        name: Static Users
        config:
          staticPasswords:
            - email: demo@example.com
              hash: "$2y$12$ZzFt9oTqZraRH5ZKcZ5kOeb2JAjqHxbgQsZKQOa76.9yoNQfXdcTK"  # password: letmein
              username: demo
